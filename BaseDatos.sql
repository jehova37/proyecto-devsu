----tablas que se cargan en H2 micro servicio servicio-clientes, destacar que estas tablas se generan en memoria para simplicar las pruebas

SET DB_CLOSE_DELAY -1;

CREATE USER IF NOT EXISTS "SA" SALT '8aedc5e03cd2a36c' HASH 'b6e4586bbcf66385e62d3cae36ad884cae1957991616b798c3d0b572bf5a9f73' ADMIN;

CREATE MEMORY TABLE "PUBLIC"."CLIENTE"(

    "CLIENTE_ID" CHARACTER VARYING(255),

    U&"CONTRASE\00d1A" CHARACTER VARYING(255),

    "ESTADO" BOOLEAN NOT NULL,

    "ID" BIGINT NOT NULL

);

ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_5" PRIMARY KEY("ID");


CREATE MEMORY TABLE "PUBLIC"."PERSONA"(

    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,

    "DIRECCION" CHARACTER VARYING(255),

    "EDAD" INTEGER NOT NULL,

    "GENERO" CHARACTER VARYING(255),

    "IDENTIFICACION" CHARACTER VARYING(255),

    "NOMBRE" CHARACTER VARYING(255),

    "TELEFONO" CHARACTER VARYING(255)

);
ALTER TABLE "PUBLIC"."PERSONA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");
ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."UK_KOU3IUYP26CLWWJ9M5D0E6T0L" UNIQUE("CLIENTE_ID");
ALTER TABLE "PUBLIC"."PERSONA" ADD CONSTRAINT "PUBLIC"."UK_R5VSMS84IH2VIWD6TATK9O5PQ" UNIQUE("IDENTIFICACION");
ALTER TABLE "PUBLIC"."CLIENTE" ADD CONSTRAINT "PUBLIC"."FKKPVKBJG32BSO6RIQGE70HWCEL" FOREIGN KEY("ID") REFERENCES "PUBLIC"."PERSONA"("ID") NOCHECK;


--tablas se cargan en H2 memoria micro servicio servicio-cuenta-movimiento
SET DB_CLOSE_DELAY -1;
CREATE USER IF NOT EXISTS "SA" SALT '30d7582fa3bc100a' HASH 'eb1c46e3926f722503d1de4f1c6e078530d93c851d99f25735b1a289e8c848ce' ADMIN;

CREATE MEMORY TABLE "PUBLIC"."CUENTA"(

    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,

    "CLIENTE_ID" BIGINT,

    "ESTADO" BOOLEAN NOT NULL,

    "NUMERO_CUENTA" CHARACTER VARYING(255),

    "SALDO_INICIAL" NUMERIC(38, 2),

    "TIPO" CHARACTER VARYING(255)

);

ALTER TABLE "PUBLIC"."CUENTA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");

CREATE MEMORY TABLE "PUBLIC"."MOVIMIENTO"(

    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,

    "FECHA" TIMESTAMP(6),

    "SALDO" NUMERIC(38, 2),

    "TIPO_MOVIMIENTO" CHARACTER VARYING(255),

    "VALOR" NUMERIC(38, 2),

    "CUENTA_ID" BIGINT NOT NULL

);

ALTER TABLE "PUBLIC"."MOVIMIENTO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("ID");

ALTER TABLE "PUBLIC"."CUENTA" ADD CONSTRAINT "PUBLIC"."UK_PJ7NCG765KT4KLNDU25BWBWE4" UNIQUE("NUMERO_CUENTA");

ALTER TABLE "PUBLIC"."MOVIMIENTO" ADD CONSTRAINT "PUBLIC"."FK4EA11FE7P3XA1KWWMDGI9F2FI" FOREIGN KEY("CUENTA_ID") REFERENCES "PUBLIC"."CUENTA"("ID") NOCHECK;
